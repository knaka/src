"//2026012432": "もしこのファイルが JSON ファイルであるならば、それは YAML ファイルから生成されたものなので、直接編集しないでください。ソースの YAML は karabiner.yaml です。"
"//2026012434": "タスク `karabiner_json:install` で、更新＆ハードリンクをします。"
# configuration files の置き場所については右記を参照。 — File locations | Karabiner-Elements https://karabiner-elements.pqrs.org/docs/json/location/
# 設定ファイルの構成。 — karabiner.json data structure | Karabiner-Elements https://karabiner-elements.pqrs.org/docs/json/root-data-structure/
global:
  check_for_updates_on_startup: true
  show_in_menu_bar: true
  show_profile_name_in_menu_bar: false
profiles:
  - name: Default profile
    selected: true
    parameters:
      delay_milliseconds_before_open_device: 1000
    virtual_hid_keyboard:
      country_code: 0
      indicate_sticky_modifier_keys_state: true
      mouse_key_xy_scale: 100
      keyboard_type_v2: ansi
    devices: []
    complex_modifications:
      parameters:
        basic.simultaneous_threshold_milliseconds: 50
        basic.to_delayed_action_delay_milliseconds: 500
        basic.to_if_alone_timeout_milliseconds: 1000
        basic.to_if_held_down_threshold_milliseconds: 500
        mouse_motion_to_scroll.speed: 100
      rules:
        # 最初に、個別のアプリケーションごとの設定を行う。Karabiner-Elements の各設定は「先勝ち」なので、個別のカスタマイズを先に、アプリごとの設定を後に書くこと
        - description: "ターミナル（iTerm2 + zsh + GNU Screen）"
          manipulators:
            # 左へ選択
            - type: basic
              conditions: &conditions_terminal
                - type: frontmost_application_if
                  bundle_identifiers:
                    - ^com.googlecode.iterm2$
              from: {key_code: s, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: left_arrow, modifiers: [shift]}]
              # 右へ選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: d, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: right_arrow, modifiers: [shift]}]
            # 左ワードへ選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: a, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: left_arrow, modifiers: [left_option, left_shift]}]
            # 右ワードへ選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: f, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: right_arrow, modifiers: [left_option, left_shift]}]
            # 行頭へ選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: a, modifiers: {mandatory: [control, command, shift], optional: []}}
              to: [{key_code: home, modifiers: [shift]}]
            # 行末へ選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: f, modifiers: {mandatory: [control, command, shift], optional: []}}
              to: [{key_code: end, modifiers: [shift]}]
            # 行頭
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: a, modifiers: {mandatory: [control, command], optional: []}}
              to: [{key_code: home, modifiers: []}]
            # 行末
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: f, modifiers: {mandatory: [control, command], optional: []}}
              to: [{key_code: end, modifiers: []}]
            # カット: zsh で kill-region 風にクリップボードへもコピーする "x-kill-region" が bind されている key へ
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: x, modifiers: {mandatory: [command], optional: []}}
              to: [{key_code: w, modifiers: [control]}]
            # コピー: zsh で copy-region-as-kill 風にクリップボードへもコピーする "x-copy-region-as-kill" が bind された key へ
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: c, modifiers: {mandatory: [command]}}
              to: [{key_code: z, modifiers: [control]}]
            # 全選択
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: a, modifiers: {mandatory: [command], optional: []}}
              to: [{key_code: a, modifiers: [option]}]
            # Ctrl + Tab でタブ移動
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: "tab", modifiers: {mandatory: ["control"], optional: []}}
              to: [{key_code: "open_bracket", modifiers: ["shift", "command"]}]
            # 同、逆移動
            - type: basic
              conditions: *conditions_terminal
              from: {key_code: "tab", modifiers: {mandatory: ["control", "shift"], optional: []}}
              to: [{key_code: "close_bracket", modifiers: ["shift", "command"]}]
        - description: "Visual Studio Code"
          manipulators:
            # Open (Search files by name)
            - type: basic
              conditions: &conditions_vscode
                - type: frontmost_application_if
                  bundle_identifiers:
                    - ^com\.microsoft\.VSCode$
              from: {key_code: o, modifiers: {mandatory: [shift, command]}}
              to: [{key_code: p, modifiers: [command]}]          
            # 変則的なタブ移動の修正（Recently-used ではなく Visual-order に）。順方向
            - type: basic
              conditions: *conditions_vscode
              from: { "key_code": "tab", "modifiers": { "mandatory": ["control"] } }
              to: [{ "key_code": "close_bracket", "modifiers": ["command", "shift"] }]
            # 同・逆方向
            - type: basic
              conditions: *conditions_vscode
              from: { "key_code": "tab", "modifiers": { "mandatory": ["control", "shift"] } }
              to: [{ "key_code": "open_bracket", "modifiers": ["command", "shift"] }]
            # Ctrl - \ で、プロンプトで送信せず改行
            - type: basic
              conditions: *conditions_vscode
              from: {key_code: "backslash", modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: "return_or_enter", modifiers: [shift]},]
        # 以下、システム全体の設定
        - description: "international1（ろ） → Shift"
          # 英語設定にした日本語キーボードで、右下の「_ ろ」キーが余るので、遠すぎる `~ を単押しへ移動。modifier としては右 Shift。
          manipulators:
            # 試しに、fenced-code-block 出力
            - type: basic
              from: {key_code: "international1", modifiers: {mandatory: [control]}}
              to: [
                {key_code: "japanese_eisuu", modifiers: []},
                # 組で出すエディタがあるので、2 の倍数個を出す
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                # Enter だとプロンプトから送られてしまうので、Shift + Enter で
                {key_code: "return_or_enter", modifiers: [shift]},
                {key_code: "return_or_enter", modifiers: [shift]},
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                {key_code: "international3", modifiers: []},
                {key_code: "left_arrow"},
                {key_code: "left_arrow"},
                {key_code: "left_arrow"},
                {key_code: "left_arrow"},
                {key_code: "left_arrow"},
              ]
            - type: basic
              from: {key_code: "international1", modifiers: {optional: [any]}}
              to: [{key_code: "right_shift"}]
              to_if_alone: [{key_code: "international3"}]
              to_if_held_down: [{key_code: "right_shift"}]
        - description: "左 Command → Backquotes (Backticks) / tilde"
          manipulators:
            - type: basic
              from: {key_code: spacebar, modifiers: {mandatory: [left_command]}}
              to: [
                # 日本語変換をオフにしてから
                {key_code: "japanese_eisuu", modifiers: []},
                {key_code: "international3", modifiers: []},
              ]
            - type: basic
              from: {key_code: spacebar, modifiers: {mandatory: [left_command, shift]}}
              to: [
                # 日本語変換をオフにしてから
                {key_code: "japanese_eisuu", modifiers: []},
                {key_code: "international3", modifiers: [shift]},
              ]
        - description: "右 Command + Space → Escape"
          manipulators:
            - type: basic
              from: {key_code: spacebar, modifiers: {mandatory: [right_command]}}
              to: [{key_code: escape}]
        - description: "IME オン（Option + Space → かな）"
          manipulators:
            - type: basic
              from: {key_code: spacebar, modifiers: {mandatory: [right_option]}}
              to: { key_code: "japanese_kana" }
        - description: "IME オフ（Ctrl + Shift → 英数）"
          manipulators:
            - type: basic
              from: {key_code: spacebar, modifiers: {mandatory: [control]}}
              to: { key_code: "japanese_eisuu" }
        - description: "かな → Option"
          manipulators:
            - type: basic
              from:
                key_code: japanese_kana
                # この modifier は指定する必要がある。さもないと、先に他の modifier が入るとヒットしなくなってしまう
                modifiers:
                  optional:
                    - any
              to: {key_code: right_option}
        - description: "英数 → Control"
          manipulators:
            - type: basic
              from:
                key_code: japanese_eisuu
                # この modifier は指定する必要がある。さもないと、先に他の modifier が入るとヒットしなくなってしまう
                modifiers:
                  optional:
                    - any
              to: {key_code: left_control}
        - description: "Ctrl + \ で、送信せず改行"
          manipulators:
            - type: basic
              from: {key_code: "backslash", modifiers: {mandatory: [control], optional: []}}
              to: {key_code: "return_or_enter", modifiers: [shift]}
        - description: "スリープ, S&leep"
          # ログインの画面からでも効く。Hammerspoon だと効かない
          manipulators: 
            - type: basic
              from:
                key_code: l
                modifiers:
                  mandatory:
                    - option
                    - command
              to:
                - shell_command: pmset sleepnow
        - description: "スクリーンロック, Screen Loc&k"
          manipulators: 
            - type: basic
              from:
                key_code: k
                modifiers:
                  mandatory:
                    - command
              to:
                - shell_command: open -b com.apple.ScreenSaver.Engine
        - description: "ダイヤモンドカーソル"
          manipulators:
            # 上
            - type: basic
              conditions: &conditions_not_terminal
                - type: frontmost_application_unless
                  bundle_identifiers:
                    - ^com.googlecode.iterm2$
              from: {key_code: e, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: up_arrow}]
            # 上選択
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: e, modifiers: {mandatory: [control, caps_lock], optional: []}}
              to: [{key_code: up_arrow, modifiers: [shift]}]
            # 下
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: x, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: down_arrow}]
            # 下選択
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: x, modifiers: {mandatory: [control, caps_lock], optional: []}}
              to: [{key_code: down_arrow, modifiers: [shift]}]
            # 左
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: s, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: left_arrow}]
            # 左選択
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: s, modifiers: {mandatory: [control, caps_lock], optional: []}}
              to: [{key_code: left_arrow, modifiers: [shift]}]
            # 右
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: d, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: right_arrow}]
            # 右選択
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: d, modifiers: {mandatory: [control, caps_lock], optional: []}}
              to: [{key_code: right_arrow, modifiers: [shift]}]
            # 左ワード
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: a, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: left_arrow, modifiers: [left_option]}]
              # to: [{key_code: home, modifiers: []}]
            # 右ワード
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: f, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: right_arrow, modifiers: [left_option]}]
            # 行頭
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: a, modifiers: {mandatory: [control, command], optional: [shift]}}
              # from: {key_code: a, modifiers: {mandatory: [control, command]}}
              to: [{key_code: left_arrow, modifiers: [left_command]}]
              # to: [{key_code: home, modifiers: []}]
            # 行末
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: f, modifiers: {mandatory: [control, command], optional: [shift]}}
              # from: {key_code: f, modifiers: {mandatory: [control, command]}}
              to: [{key_code: right_arrow, modifiers: [left_command]}]
              # to: [{key_code: end, modifiers: []}]
            # 前ページ
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: r, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: page_up}]
            # 次ページ
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: c, modifiers: {mandatory: [control], optional: [shift]}}
              to: [{key_code: page_down}]
            # ページ先頭
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: r, modifiers: {mandatory: [control, command], optional: [shift]}}
              to: [{key_code: up_arrow, modifiers: [left_command]}]
            # ページ末尾
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: c, modifiers: {mandatory: [control, command], optional: [shift]}}
              to: [{key_code: down_arrow, modifiers: [left_command]}]
            # マルチカーソル上延長（エディタのみ）
            - type: basic
              conditions: *conditions_vscode
              from: {key_code: w, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: up_arrow, modifiers: [left_option, left_command]}]
            # マルチカーソル下延長（エディタのみ）
            - type: basic
              conditions: *conditions_vscode
              from: {key_code: z, modifiers: {mandatory: [control, shift], optional: []}}
              to: [{key_code: down_arrow, modifiers: [left_option, left_command]}]
            # スクロールアップ（マウスを利用）
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: w, modifiers: {mandatory: [control], optional: []}}
              to: [{mouse_key: {vertical_wheel: -40}}]
            # スクロールダウン（マウスを利用）
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: z, modifiers: {mandatory: [control], optional: []}}
              to: [{mouse_key: {vertical_wheel: +40}}]
            # 削除
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: g, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: delete_forward, modifiers: []}]
            # バックスペース
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: h, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: delete_or_backspace, modifiers: []}]
            # Enter
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: m, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: return_or_enter, modifiers: []}]
            # Tab
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: i, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: tab, modifiers: []}]
            # Ctrl-n
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: n, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: down_arrow, modifiers: []}]
            # Ctrl-p
            - type: basic
              conditions: *conditions_not_terminal
              from: {key_code: p, modifiers: {mandatory: [control], optional: []}}
              to: [{key_code: up_arrow, modifiers: []}]
        - description: "ランチャー (Option + Command + ?)"
          manipulators:
            # 1
            - type: basic
              from: {key_code: "1", modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "osascript $HOME/src/applescript/activate-browser-tab.scpt https://mail.google.com/mail/u/0/"}]          
            # 2
            - type: basic
              from: {key_code: "2", modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "osascript $HOME/src/applescript/activate-browser-tab.scpt https://mail.google.com/mail/u/1/"}]
            # Browser
            - type: basic
              from: {key_code: b, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.google.Chrome"}]
            # C
            # Dictionary
            - type: basic
              from: {key_code: d, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.apple.Dictionary"}]
            # Editor
            - type: basic
              from: {key_code: e, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.microsoft.VSCode"}]
            # Filer
            - type: basic
              from: {key_code: f, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.apple.finder"}]
            # G
            # H
            # I
            # J
            # K
            # sLack
            - type: basic
              from: {key_code: l, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.tinyspeck.slackmacgap"}]
            # M
            # N: liNe
            - type: basic
              from: {key_code: n, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b jp.naver.line.mac"}]
            # O
            # P
            # Q
            # R
            # Shell
            - type: basic
              from: {key_code: s, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.googlecode.iterm2"}]
            # Twitter
            - type: basic
              from: {key_code: t, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "osascript $HOME/src/applescript/activate-browser-tab.scpt https://x.com"}]
            # U
            # Viewer
            - type: basic
              from: {key_code: v, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "open -b com.apple.Preview"}]
            # W
            # X (TRNASformer)
            - type: basic
              from: {key_code: x, modifiers: {mandatory: [option, command]}}
              to: [{shell_command: "osascript $HOME/src/applescript/activate-browser-tab.scpt https://claude.ai https://gemini.google.com"}]
            # Y
            # Z
